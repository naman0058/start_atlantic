<%- include ('./storeListingHeader.ejs') %>


        <!--**********************************
            Content body start
        ***********************************-->
        <div class="content-body">

            
            <!-- row -->

            <div class="container-fluid">
              
                <div class="row" id='insertdiv'>
                    <div class="col-12">
                        <h3 class="content-heading mt-3">Transaction Received Reports </h3>

                    </div>
                   
                    <div class="col-xl-12 col-xxl-12">
                        <div class="card">
                            <div class="card-body">    
                                    <div class="basic-form">
                                        <form action="/admin/dashboard/store-listing/category/insert" method="POST" enctype="multipart/form-data" class="uploadImage">
                                               <div class="form-row">
                                                
                                                <div class="col-6">
                                                    <label>From Date</label>
                                                    <input type="date" class="form-control" name="from_date" id="from_date" placeholder="State">
                                                </div>
                                                <div class="col-6">
                                                    <label>To Date</label>
                                                    <input type="date" class="form-control" name="to_date" id="to_date" placeholder="Category Name">
                                                </div>
                                              
                                            </div>
                               <button class="btn btn-primary show-reports" type="button" style="margin-top:20px;float:right">Show Payout Reports</button>

                                        </form>
                                    </div>
                                    
                                  
                                    
                                   
                                    
                             
                                    
                                
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                   
                    
                    <div class="col-xl-12 col-xxl-12">
                        <div class="card">
                            <div class="card-body">
                                <!-- <h4 class="card-title">Table Bordered</h4> -->
                                <div class="table-responsive">
                                   <div id="result"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
               
            </div>
        </div>
        <!--**********************************
            Content body end
        ***********************************-->
        
        
        <!--**********************************
            Footer start
        ***********************************-->
        <div class="footer">
            <div class="copyright">
                <p><a href="templatespoint.net"></a></p>
            </div>
        </div>
        <!--**********************************
            Footer end
        ***********************************-->

        
        <!--**********************************
            Right sidebar start
        ***********************************-->
        <div class="sidebar-right">
            <a class="sidebar-right-trigger gradient-5-x" href="javascript:void(0)">
                <span><i class="fa fa-cog fa-spin"></i></span>
            </a>
            <div class="sidebar-right-inner">
                <div class="admin-settings">
                    <h4>Pick your style</h4>
                    <div>
                        <p>Background</p>
                        <select class="form-control" name="theme_version" id="theme_version">
                            <option value="light">Light</option>
                            <option value="dark">Dark</option>
                        </select>
                    </div>
                    <div>
                        <p>Layout</p>
                        <select class="form-control" name="theme_layout" id="theme_layout">
                            <option value="vertical">Vertical</option>
                            <option value="horizontal">Horizontal</option>
                        </select>
                    </div>
                    <div>
                        <p>Sidebar</p>
                        <select class="form-control" name="sidebar_style" id="sidebar_style">
                            <option value="full">Full</option>
                            <option value="mini">Mini</option>
                            <option value="compact">Compact</option>
                            <option value="overlay">Overlay</option>
                        </select>
                    </div>
                    <div>
                        <p>Sidebar position</p>
                        <select class="form-control" name="sidebar_position" id="sidebar_position">
                            <option value="static">Static</option>
                            <option value="fixed">Fixed</option>
                        </select>
                    </div>
                    <div>
                        <p>Header position</p>
                        <select class="form-control" name="header_position" id="header_position">
                            <option value="static">Static</option>
                            <option value="fixed">Fixed</option>
                        </select>
                    </div>
                    <div>
                        <p>Container</p>
                        <select class="form-control" name="container_layout" id="container_layout">
                            <option value="wide">Wide</option>
                            <option value="boxed">Boxed</option>
                            <option value="wide-boxed">Wide Boxed</option>
                        </select>
                    </div>
                    <div>
                        <p>Direction</p>
                        <select class="form-control" name="theme_direction" id="theme_direction">
                            <option value="ltr">LTR</option>
                            <option value="rtl">RTL</option>
                        </select>
                    </div>
                    <div>
                        <p>Navigation Header</p>
                        <div>
                            <span>
                                <input type="radio" name="navigation_header" value="color_1" class="filled-in chk-col-primary" id="nav_header_bg_1">
                                <label for="nav_header_bg_1"></label>
                            </span>
                            <span>
                                <input type="radio" name="navigation_header" value="color_2" class="filled-in chk-col-primary" id="nav_header_bg_2">
                                <label for="nav_header_bg_2"></label>
                            </span>
                            <span>
                                <input type="radio" name="navigation_header" value="color_3" class="filled-in chk-col-primary" id="nav_header_bg_3">
                                <label for="nav_header_bg_3"></label>
                            </span>
                            <span>
                                <input type="radio" name="navigation_header" value="color_4" class="filled-in chk-col-primary" id="nav_header_bg_4">
                                <label for="nav_header_bg_4"></label>
                            </span>
                            <span>
                                <input type="radio" name="navigation_header" value="color_5" class="filled-in chk-col-primary" id="nav_header_bg_5">
                                <label for="nav_header_bg_5"></label>
                            </span>
                            <span>
                                <input type="radio" name="navigation_header" value="color_6" class="filled-in chk-col-primary" id="nav_header_bg_6">
                                <label for="nav_header_bg_6"></label>
                            </span>
                            <span>
                                <input type="radio" name="navigation_header" value="color_7" class="filled-in chk-col-primary" id="nav_header_bg_7">
                                <label for="nav_header_bg_7"></label>
                            </span>
                            <span>
                                <input type="radio" name="navigation_header" value="color_8" class="filled-in chk-col-primary" id="nav_header_bg_8">
                                <label for="nav_header_bg_8"></label>
                            </span>
                            <span>
                                <input type="radio" name="navigation_header" value="color_9" class="filled-in chk-col-primary" id="nav_header_bg_9">
                                <label for="nav_header_bg_9"></label>
                            </span>
                            <span>
                                <input type="radio" name="navigation_header" value="color_10" class="filled-in chk-col-primary" id="nav_header_bg_10">
                                <label for="nav_header_bg_10"></label>
                            </span>
                        </div>
                    </div>
                    <div>
                        <p>Header</p>
                        <div>
                            <span>
                                <input type="radio" name="header_bg" value="color_1" class="filled-in chk-col-primary" id="header_bg_1">
                                <label for="header_bg_1"></label>
                            </span>
                            <span>
                                <input type="radio" name="header_bg" value="color_2" class="filled-in chk-col-primary" id="header_bg_2">
                                <label for="header_bg_2"></label>
                            </span>
                            <span>
                                <input type="radio" name="header_bg" value="color_3" class="filled-in chk-col-primary" id="header_bg_3">
                                <label for="header_bg_3"></label>
                            </span>
                            <span>
                                <input type="radio" name="header_bg" value="color_4" class="filled-in chk-col-primary" id="header_bg_4">
                                <label for="header_bg_4"></label>
                            </span>
                            <span>
                                <input type="radio" name="header_bg" value="color_5" class="filled-in chk-col-primary" id="header_bg_5">
                                <label for="header_bg_5"></label>
                            </span>
                            <span>
                                <input type="radio" name="header_bg" value="color_6" class="filled-in chk-col-primary" id="header_bg_6">
                                <label for="header_bg_6"></label>
                            </span>
                            <span>
                                <input type="radio" name="header_bg" value="color_7" class="filled-in chk-col-primary" id="header_bg_7">
                                <label for="header_bg_7"></label>
                            </span>
                            <span>
                                <input type="radio" name="header_bg" value="color_8" class="filled-in chk-col-primary" id="header_bg_8">
                                <label for="header_bg_8"></label>
                            </span>
                            <span>
                                <input type="radio" name="header_bg" value="color_9" class="filled-in chk-col-primary" id="header_bg_9">
                                <label for="header_bg_9"></label>
                            </span>
                            <span>
                                <input type="radio" name="header_bg" value="color_10" class="filled-in chk-col-primary" id="header_bg_10">
                                <label for="header_bg_10"></label>
                            </span>
                        </div>
                    </div>
                    <div>
                        <p>Sidebar</p>
                        <div>
                            <span>
                                <input type="radio" name="sidebar_bg" value="color_1" class="filled-in chk-col-primary" id="sidebar_bg_1">
                                <label for="sidebar_bg_1"></label>
                            </span>
                            <span>
                                <input type="radio" name="sidebar_bg" value="color_2" class="filled-in chk-col-primary" id="sidebar_bg_2">
                                <label for="sidebar_bg_2"></label>
                            </span>
                            <span>
                                <input type="radio" name="sidebar_bg" value="color_3" class="filled-in chk-col-primary" id="sidebar_bg_3">
                                <label for="sidebar_bg_3"></label>
                            </span>
                            <span>
                                <input type="radio" name="sidebar_bg" value="color_4" class="filled-in chk-col-primary" id="sidebar_bg_4">
                                <label for="sidebar_bg_4"></label>
                            </span>
                            <span>
                                <input type="radio" name="sidebar_bg" value="color_5" class="filled-in chk-col-primary" id="sidebar_bg_5">
                                <label for="sidebar_bg_5"></label>
                            </span>
                            <span>
                                <input type="radio" name="sidebar_bg" value="color_6" class="filled-in chk-col-primary" id="sidebar_bg_6">
                                <label for="sidebar_bg_6"></label>
                            </span>
                            <span>
                                <input type="radio" name="sidebar_bg" value="color_7" class="filled-in chk-col-primary" id="sidebar_bg_7">
                                <label for="sidebar_bg_7"></label>
                            </span>
                            <span>
                                <input type="radio" name="sidebar_bg" value="color_8" class="filled-in chk-col-primary" id="sidebar_bg_8">
                                <label for="sidebar_bg_8"></label>
                            </span>
                            <span>
                                <input type="radio" name="sidebar_bg" value="color_9" class="filled-in chk-col-primary" id="sidebar_bg_9">
                                <label for="sidebar_bg_9"></label>
                            </span>
                            <span>
                                <input type="radio" name="sidebar_bg" value="color_10" class="filled-in chk-col-primary" id="sidebar_bg_10">
                                <label for="sidebar_bg_10"></label>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--**********************************
            Right sidebar end
        ***********************************-->
    </div>
    <!--**********************************
        Main wrapper end
    ***********************************-->

    <!--**********************************
        Scripts
    ***********************************-->
    <script src="../../assets/plugins/common/common.min.js"></script>
    <script src="/Admin/main/./js/custom.min.js"></script>
    <script src="/Admin/main/./js/settings.js"></script>
    <script src="/Admin/main/./js/quixnav.js"></script>
    <script src="/Admin/main/./js/styleSwitcher.js"></script>
    
    <!-- Jquery Validation -->
    <script src="../../assets/plugins/jquery-validation/jquery.validate.min.js"></script>
    <!-- Form step -->
    <script src="../../assets/plugins/jquery-steps/build/jquery.steps.min.js"></script>
    <script src="../../assets/plugins/jquery-validation/jquery.validate.min.js"></script>
    <!-- Form validate init -->
    <script src="/Admin/main/./js/plugins-init/jquery.validate-init.js"></script>
    <!-- Dropify -->
    <script src="../../assets/plugins/dropify/dist/js/dropify.min.js"></script>
    <!-- Typeahead -->
    <script src="../../assets/plugins/typeahead.js/dist/typeahead.jquery.min.js"></script>
    <script src="../../assets/plugins/typeahead.js/dist/typeahead.bundle.min.js"></script>
    <script src="../../assets/plugins/typeahead.js/dist/bloodhound.min.js"></script>
    <!-- Tagsinput -->
    <script src="../../assets/plugins/bootstrap-tagsinput/js/bootstrap-tagsinput.min.js"></script>
    <!-- Switchery -->
    <script src="../../assets/plugins/innoto-switchery/dist/switchery.min.js"></script>
    <!-- Select 2 -->
    <script src="../../assets/plugins/select2/js/select2.full.min.js"></script>
    <!-- Touchspinner -->
    <script src="../../assets/plugins/bootstrap-touchspin/js/jquery.bootstrap-touchspin.min.js"></script>
    <!-- Input mask -->
    <script src="../../assets/plugins/jasny-bootstrap/dist/js/jasny-bootstrap.min.js"></script>
    <!-- x-editable -->
    <script src="../../assets/plugins/moment/moment.min.js"></script>
    <script src="../../assets/plugins/x-editable/dist/bootstrap3-editable/js/bootstrap-editable.min.js"></script>
    <!-- Summernote -->
    <script src="../../assets/plugins/summernote/js/summernote.min.js"></script>
    <!-- Daterangepicker -->
    <!-- momment js is must -->
    <!-- <script src="../../assets/plugins/moment/moment.min.js"></script> -->
    <script src="../../assets/plugins/bootstrap-daterangepicker/daterangepicker.js"></script>
    <!-- clockpicker -->
    <script src="../../assets/plugins/moment/moment.min.js"></script>
    <script src="../../assets/plugins/clockpicker/js/bootstrap-clockpicker.min.js"></script>
    <!-- asColorPicker -->
    <!-- momment js is must -->
    <!-- <script src="../../assets/plugins/moment/moment.min.js"></script> -->
    <script src="../../assets/plugins/jquery-asColor/jquery-asColor.min.js"></script>
    <script src="../../assets/plugins/jquery-asGradient/jquery-asGradient.min.js"></script>
    <script src="../../assets/plugins/jquery-asColorPicker/js/jquery-asColorPicker.min.js"></script>
    <!-- Material color picker -->
    <!-- momment js is must -->
    <!-- <script src="../../assets/plugins/moment/moment.min.js"></script> -->
    <script src="../../assets/plugins/bootstrap-material-datetimepicker/js/bootstrap-material-datetimepicker.js"></script>
    <!-- pickdate -->
    <script src="../../assets/plugins/pickadate/picker.js"></script>
    <script src="../../assets/plugins/pickadate/picker.time.js"></script>
    <script src="../../assets/plugins/pickadate/picker.date.js"></script>




    <!-- Form step init -->
    <script src="/Admin/main/./js/plugins-init/jquery-steps-init.js"></script>
    <!-- Dropify init -->
    <script src="/Admin/main/./js/plugins-init/dropify-init.js"></script>
    <!-- Typeahead init -->
    <script src="/Admin/main/./js/plugins-init/typehead.js-init.js"></script>
    <!-- Tagsinput init -->
    <script src="/Admin/main/./js/plugins-init/bootstrap-tagsinput-init.js"></script>
    <!-- Switchery init -->
    <script src="/Admin/main/./js/plugins-init/switchery-init.js"></script>
    <!-- Select 2 init -->
    <script src="/Admin/main/./js/plugins-init/select2-init.js"></script>
    <!-- Touchspinner init -->
    <script src="/Admin/main/./js/plugins-init/bootstrap-touchpin-init.js"></script>
    <!-- x-editable init -->
    <script src="/Admin/main/./js/plugins-init/bootstrap-editable-init.js"></script>
    <!-- Summernote init -->
    <script src="/Admin/main/./js/plugins-init/summernote-init.js"></script>
    <!-- Daterangepicker -->
    <script src="/Admin/main/./js/plugins-init/bs-daterange-picker-init.js"></script>
    <!-- Clockpicker init -->
    <script src="/Admin/main/./js/plugins-init/clock-picker-init.js"></script>
    <!-- asColorPicker init -->
    <script src="/Admin/main/./js/plugins-init/jquery-asColorPicker.init.js"></script>
    <!-- Material color picker init -->
    <script src="/Admin/main/./js/plugins-init/material-date-picker-init.js"></script>
    <!-- Pickdate -->
    <script src="/Admin/main/./js/plugins-init/pickadate-init.js"></script>





    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.form/3.51/jquery.form.min.js"></script>
    <script>
    
      $('.uploadImage').submit(function (e) {
        e.preventDefault();
    
        // var title = $('#title').val(); 
    
        $(this).ajaxSubmit({
          // data: {title: title},
          contentType: 'application/json',
          success: function (response) {
            alert('successfully')

          }
        });
        return false;
      });
    
    
    
    </script>










<script src="/javascripts/category.js"></script>




<script>
    $('.show-reports').click(function(){
        if( $('#from_date').val() == '' || $('#from_date').val() == [] ) alert('Choose From Date')
        else if ( $('#to_date').val() == '' || $('#to_date').val() == [] ) alert('Choose To Date')
        else {
         
            let from_date = $('#from_date').val()
            let to_date = $('#to_date').val()


// let from_date = '2021-09-01'
// let to_date = '2021-09-15'

            $.get('/admin/dashboard/ecommerce/payout/report',{from_date,to_date},data=>{
                console.log(data)
                makeTable(data)
            })
        }
    })


 


    function makeTable(data){
    let table = ` <div class="table-responsive">
<div class = 'container'>
        <div class='row'>
            <div class = 'col-lg-6'>
                <input type ='text' class = 'form-control referenceid' placeholder = 'Enter Refrence ID'>
                </div>
            <div class = 'col-lg-6'>
    <button type="button"  class="btn btn-warning" style="" id="submit1">Submit </button>
                
                </div>

            </div>
            </div>

    <button type="button"  class="btn btn-primary" style="margin:50px">Total Payout Send : ${data[0][0].total_amount} </button>
    <button type="button"  class="btn btn-primary" style="margin:50px;float:right" id="selectall">Select All </button>


<table id="report-table" class="table  table-striped mb-0">
<thead>
<tr>
    <th>#</th>
<th>Account Holder Name</th>
<th>Account Number</th>
<th>Bank Name</th>
<th>IFSC CODE</th>
<th>Branch Name</th>
<th>Account Type</th>
<th>Mobile Number</th>
<th>Amount</th>


</tr>
</thead>
<tbody>`

$.each(data[1],(i,item)=>{
table+=`<tr>
<td><input type='checkbox' name = 'products[]' value="${item.id}"  id='products' class='check'></td>


<td>${item.vendor_account_holder_name}</td>
<td>${item.vendor_account_number}</td>
<td>${item.vendor_bank_name}</td>
<td>${item.vendor_ifsc_code}</td>
<td>${item.vendor_branch_name}</td>

<td>${item.vendor_account_type}</td>
<td>${item.vendor_mobile_number}</td>
<td>${item.vendor_price}</td>



</tr>`
})
table+=`</tbody>
</table>
</div>

  
<!-- End Row -->`
    $('#result').html(table)
    $('#result').show()
}










$(function () {
        // add multiple select / deselect functionality
$('#result').on('click', '#selectall', function() {

        // $("#selectall").click(function () {
           
            $('.check').prop('checked', true);
        });
 
        // if all checkbox are selected, then check the select all checkbox
        // and viceversa
        $('#result').on('click', '#submit1', function() {

    // alert($('.check').val())

  
    let productid =$('#products:checked').val();
    
    var a = [];
                $("#products:checked").each(function() {
                    a.push(this.value);
                });
               
    console.log('products',a.length)

    if($('.referenceid').val() == '' || $('.referenceid').val() == null || $('.referenceid').val() == []) alert('Enter Reference ID')
     else if( a.length == 0 || a.length == '0' ) alert('Select Atleast One Account')

    else{
        let b = JSON.stringify(a)
        let reference_id = $('.referenceid').val()


 $.post('/admin/dashboard/update/booking-status',{reference_id,b},data=>{
            alert('Update Successfully')
            window.location.reload()
        })

    }


   

        //    alert('hi')
 
        });
    });


</script>



</body>


</html>